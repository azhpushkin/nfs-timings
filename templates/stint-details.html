{% extends "base.html" %}

{% block title %}
    KARTS
{% endblock %}


{% block body %}
    <h3>
        {{ kart(number=stint.kart) }} by {{ stint.pilot }}
        <br>
        &#128336; {{ stint.stint_started_at|format_racetime }}
    </h3>

    <b>Best lap: {{ stint.best_lap|round(3) }}</b><br>
    Average: {{ stint.avg_80|round(3) }}<br><br>

    Best S1: {{ stint.best_sector_1|round(2) }}<br>
    Best S2: {{ stint.best_sector_2|round(2) }}<br>
    (Best S1 + S2: {{ stint.best_theoretical|round(3) }})<br>

    <br>
    <div style="display: flex; align-items: center; justify-content: space-around">
        <a href="{{ url('kart-detail', args=[stint.kart]) }}">
            <button>
                Go to {{ kart(number=stint.kart, style="display: inline-block", nolink=true) }} stats
            </button>
        </a>
        <a href="{{ url('team-detail', args=[team.number]) }}">
            <button>
                Go to {{ team.name }} (# {{ team.number }}) page
            </button>
        </a>
    </div>
    <hr>

    <table>
        <thead>
            <tr>
                <th>Lap #</th>
                <th>Time</th>
                <th>S1</th>
                <th>S2</th>
            </tr>
        </thead>

        {% for lap in laps %}
            <tr class="stint-lap">

                <td>{{ lap.lap_number }}</td>
                <td {% if lap.lap_time == stint.best_lap %}
                        style="background-color: #f79fff"
                    {% elif lap.lap_time < close_to_best %}
                        style="background-color: #afff9f"
                    {% endif %}>
                    {{ lap.lap_time }}
                </td>

                <td {% if lap.sector_1 == stint.best_sector_1 %}
                        style="background-color: #f79fff"
                    {% elif lap.sector_1 < close_to_best_sector_1 %}
                        style="background-color: #afff9f"
                    {% endif %}>{{ lap.sector_1 }}</td>

                <td {% if lap.sector_2 == stint.best_sector_2 %}
                        style="background-color: #f79fff"
                    {% elif lap.sector_2 < close_to_best_sector_2 %}
                        style="background-color: #afff9f"
                    {% endif %}>{{ lap.sector_2 }}</td>
            </tr>
        {% endfor %}
    </table>


{% endblock %}
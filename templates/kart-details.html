{% extends "base.html" %}
{% load nfsformat %}

{% block title %}
    KARTS
{% endblock %}


{% block body %}
    <h3>
    Stints on <a class="kart-number"  href="{% url 'kart-detail' kart %}">{{ kart }}</a>
    </h3>
    <div>
    Order by:
        <ul class="sorting-options">
            <li>{% if sorting != 'best_lap' %}<a href="{% url 'kart-detail' kart %}">Best</a>{% else %}<b>Best</b>{% endif %}</li>
            <li>{% if sorting != 'avg_80' %}<a href="{% url 'kart-detail' kart %}?sort=avg_80">Avg</a>{% else %}<b>Avg</b>{% endif %}</li>
            <li>{% if sorting != 'optimal' %}<a href="{% url 'kart-detail' kart %}?sort=optimal">Optimal</a>{% else %}<b>Optimal</b>{% endif %}</li>
            <li>{% if sorting != 'best_sector_1' %}<a href="{% url 'kart-detail' kart %}?sort=best_sector_1">S1</a>{% else %}<b>S1</b>{% endif %}</li>
            <li>{% if sorting != 'best_sector_2' %}<a href="{% url 'kart-detail' kart %}?sort=best_sector_2">S2</a>{% else %}<b>S2</b>{% endif %}</li>
        </ul>
    </div>
    <table>
        <thead>
        <tr>
            <th class="pilot-name">Pilot</th>
            {% if sorting == 'optimal' %}
            <th>Optimal</th>
            {% else %}
            <th>Best</th>
            {% endif %}

            <th>Sectors</th>
            <th>Avg</th>
            <th>Details</th>
        </tr>

        </thead>
        {% for stint in stints %}

            <tr>
                <td class="pilot-name">{{ stint.pilot|split_pilot }}</td>
            {% if sorting == 'optimal' %}
            <td style="font-weight: bold">
            {{ stint.best_theoretical|floatformat:3 }}
            </td>

            {% else %}
            <td {% if sorting == 'best_lap' %}style="font-weight: bold;"{% endif %}>{{ stint.best_lap|floatformat:3 }}</td>
            {% endif %}
                <td>
                    <span {% if sorting == 'best_sector_1' %}style="font-weight: bold;"{% endif %}>{{ stint.best_sector_1|floatformat:2 }}</span>
                    <br>
                    <span {% if sorting == 'best_sector_2' %}style="font-weight: bold;"{% endif %}>{{ stint.best_sector_2|floatformat:2 }}</span>
                </td>
                <td {% if sorting == 'avg_80' %}style="font-weight: bold;"{% endif %}>{{ stint.avg_80|floatformat:3 }}</td>
                <td><a href="{% url 'stint-detail' stint.stint_id %}">Show</a></td>
            </tr>
        {% endfor %}

    </table>

{% endblock %}